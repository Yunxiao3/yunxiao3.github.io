<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.7.4">Jekyll</generator><link href="http://localhost:4000/atom.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2019-10-12T20:09:26+08:00</updated><id>http://localhost:4000/atom.xml</id><title type="html">西红柿炒番茄</title><subtitle>We are not at rest;we are on a journey.</subtitle><author><name>Yunxiao</name></author><entry><title type="html">一点关于Swap配置对性能影响的思考</title><link href="http://localhost:4000/linux/2019/10/12/%E4%B8%80%E4%BA%9B%E5%85%B3%E4%BA%8ELinux-swap%E7%9A%84%E9%97%AE%E9%A2%98/" rel="alternate" type="text/html" title="一点关于Swap配置对性能影响的思考" /><published>2019-10-12T19:32:26+08:00</published><updated>2019-10-12T19:32:26+08:00</updated><id>http://localhost:4000/linux/2019/10/12/%E4%B8%80%E4%BA%9B%E5%85%B3%E4%BA%8ELinux-swap%E7%9A%84%E9%97%AE%E9%A2%98</id><content type="html" xml:base="http://localhost:4000/linux/2019/10/12/%E4%B8%80%E4%BA%9B%E5%85%B3%E4%BA%8ELinux-swap%E7%9A%84%E9%97%AE%E9%A2%98/">&lt;p&gt;之前在学Linux的时候就了解过，Swap分区是在Linux系统的物理内存不够用的时候，把硬盘空间中的一部分空间释放出来，以供当前运行的程序使用的一种机制，类似于windows的虚拟内存的作用。但是一直停留在对这个概念的了解上面，并没有接触或者感触到Swap对系统性能的影响。直到前段时间在用无服务器下载Linux内核的源码时出现了Out of memory的错误，因为之前使用阿里云相同内存的服务器并没有出现这种情况，所以在排查了一遍以后才发现自己的服务器没有设置Swap分区，导致1G的内存不够用。在将Swap调整到1G后运行正常。为什么不将内存设置的更大些呢？原因很简单因为Swap分区的内存是驻留在硬盘上的，而读写硬盘要比直接使用真实内存慢得多(要慢数千倍，即使是SSD也会慢很多后文会提到)设置过大的Swap内存可能会让系统性能变得异常糟糕。在用Swap解决了内存不足的问题后，我又发现自己的电脑在CPU利用率不高的情况下依旧很卡，之前一直以为是CPU性能跟不上，但仔细排查以后发现自己 &lt;strong&gt;/proc/sys/vm/swappiness&lt;/strong&gt;中的值是默认的60(swappiness=0的时候表示最大限度使用物理内存，然后才是 swap空间，swappiness＝100的时候表示积极的使用swap分区，并且把内存上的数据及时的搬运到swap空间里面。)，这导致在内存充足的情况下Swap分区的利用率比内存还要高。而这极大的拉低了我系统的流畅性。在将swappiness的值设置为5以后自己的电脑无论是在开机还是运行过程都比原来感觉快了许多。&lt;/p&gt;

&lt;p&gt;查看并修改swappiness的命令：&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo cat&lt;/span&gt; /proc/sys/vm/swappiness
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;sysctl &lt;span class=&quot;nt&quot;&gt;-w&lt;/span&gt; vm.swappiness&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;5
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;当然Swap还有很多东西需要去学习和了解，在面对不同的应用时和不同的场景下Swap大小和swappiness的设置都有着很多学问，在此只是记录一下自己对Swap分区和系统性能之间的一点点思考。&lt;/p&gt;</content><author><name>Yunxiao</name></author><summary type="html">之前在学Linux的时候就了解过，Swap分区是在Linux系统的物理内存不够用的时候，把硬盘空间中的一部分空间释放出来，以供当前运行的程序使用的一种机制，类似于windows的虚拟内存的作用。但是一直停留在对这个概念的了解上面，并没有接触或者感触到Swap对系统性能的影响。直到前段时间在用无服务器下载Linux内核的源码时出现了Out of memory的错误，因为之前使用阿里云相同内存的服务器并没有出现这种情况，所以在排查了一遍以后才发现自己的服务器没有设置Swap分区，导致1G的内存不够用。在将Swap调整到1G后运行正常。为什么不将内存设置的更大些呢？原因很简单因为Swap分区的内存是驻留在硬盘上的，而读写硬盘要比直接使用真实内存慢得多(要慢数千倍，即使是SSD也会慢很多后文会提到)设置过大的Swap内存可能会让系统性能变得异常糟糕。在用Swap解决了内存不足的问题后，我又发现自己的电脑在CPU利用率不高的情况下依旧很卡，之前一直以为是CPU性能跟不上，但仔细排查以后发现自己 /proc/sys/vm/swappiness中的值是默认的60(swappiness=0的时候表示最大限度使用物理内存，然后才是 swap空间，swappiness＝100的时候表示积极的使用swap分区，并且把内存上的数据及时的搬运到swap空间里面。)，这导致在内存充足的情况下Swap分区的利用率比内存还要高。而这极大的拉低了我系统的流畅性。在将swappiness的值设置为5以后自己的电脑无论是在开机还是运行过程都比原来感觉快了许多。</summary></entry><entry><title type="html">Hello World</title><link href="http://localhost:4000/%E9%9A%8F%E7%AC%94/2019/10/11/HelloWorld/" rel="alternate" type="text/html" title="Hello World" /><published>2019-10-11T19:53:05+08:00</published><updated>2019-10-11T19:53:05+08:00</updated><id>http://localhost:4000/%E9%9A%8F%E7%AC%94/2019/10/11/HelloWorld</id><content type="html" xml:base="http://localhost:4000/%E9%9A%8F%E7%AC%94/2019/10/11/HelloWorld/">&lt;p&gt;很久都没有写博客了，也不知道为什么今天突然心血来潮在Github上搭了一个博客。也许是自己最近这一段时间太过颓废，想尝试着改变自己。其实之前也一直都想写些什么的，但博客放在自己的服务器上总觉得不放心，便一直迟迟没有动笔。而最近刚保完研究，也算比较清闲。其实这段时间自己一直都陷入在一种迷茫而又无所事事的状态，特别是拿到浙软和哈深的offer后一直在纠结于两所学校的选择。直到现在自己也不知道，选择浙软是否是一个好的选择。或许就像《未选择的路》中的那样，自己选择了一条自己觉得更诱人更美丽的道路，多年以后在生活不顺，人生失意的时候也会问问自己当年为什么要选择这条路。&lt;/p&gt;

&lt;center&gt;
&lt;pre&gt; 
    《未选择的路》
    
黄色的树林里分出两条路
可惜我不能同时去涉足
我在那路口久久伫立
我向着一条路极目望去
直到它消失在丛林深处
但我却选择了另外一条路
它荒草萋萋，十分幽寂
显得更诱人，更美丽
虽然在这条小路上
很少留下旅人的足迹
那天清晨落叶满地
两条路都未经脚印污染
呵，留下一条路等改日再见
但我知道路径延绵无尽头
恐怕我难以再回返
也许多少年后在某个地方，
我将轻声叹息将往事回顾：
一片树林里分出两条路——
而我选择了人迹更少的一条，
从此决定了我一生的道路。

&lt;/pre&gt;
&lt;/center&gt;

&lt;p&gt;回首正是：忽忽一场大梦，其乐也无边。幽幽一朝梦觉，其恨也幽远。&lt;/p&gt;</content><author><name>Yunxiao</name></author><summary type="html">很久都没有写博客了，也不知道为什么今天突然心血来潮在Github上搭了一个博客。也许是自己最近这一段时间太过颓废，想尝试着改变自己。其实之前也一直都想写些什么的，但博客放在自己的服务器上总觉得不放心，便一直迟迟没有动笔。而最近刚保完研究，也算比较清闲。其实这段时间自己一直都陷入在一种迷茫而又无所事事的状态，特别是拿到浙软和哈深的offer后一直在纠结于两所学校的选择。直到现在自己也不知道，选择浙软是否是一个好的选择。或许就像《未选择的路》中的那样，自己选择了一条自己觉得更诱人更美丽的道路，多年以后在生活不顺，人生失意的时候也会问问自己当年为什么要选择这条路。</summary></entry></feed>